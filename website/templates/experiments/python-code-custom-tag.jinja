{% extends 'base.jinja' %}
{% block head %}
<script href="/static/js/custom-tags/python-code.js"></script>
<title>Custom Python Tage</title>
{% endblock %}
{% block body %}
<h1>The python-code tag</h1>
<template id="python-code-template">
{% include 'base_components/meta.jinja' %}

{% include 'base_components/favicon.jinja' %}

<!-- fonts -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Xanh+Mono&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">

<!-- local style and scripts -->
<link crossorigin="anonymous" href="/static/css/bundle.min.css" rel="stylesheet">

<!-- bootstrap -->
<link crossorigin="anonymous" href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script crossorigin="anonymous" src="/static/bootstrap/js/bootstrap.bundle.min.js"></script>

<!--jquery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!--skulpt-->
<script src="/static/skulpt/skulpt.min.js"></script>
<script src="/static/skulpt/skulpt-stdlib.min.js"></script>

<!--import ace-->
<script
        crossorigin="anonymous"
        integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q=="
        src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"
></script>
<!--setting height is important-->
<style>
      .editor, .output {
        height: 60vh;
      }

</style>
<div style="display: flex; flex-wrap: wrap;">
    <!--editor container: setting width to is important-->
    <div style="width: 50%;">
        <div class="editor"></div>
    </div>
    <!--output container: setting width to is important-->
    <div style="width: 50%; background-color: black; color: white;">
        <div class="output"></div>
    </div>
    <!--button group-->
    <div style="margin-top: 10px;">
        <button class="run-button btn btn-success" onclick="runit($($(this).parent().siblings()[0]).children()[0], $($(this).parent().siblings()[1]).children()[0])"
                type="button">
            Run code <span class="material-icons md-24">play_arrow</span>
        </button>
        <button class="stop-button btn btn-danger" onclick="stopit()" style="display: none;" type="button">
            Stop code<span class="material-icons md-24">stop</span>
        </button>
    </div>
</div>
<script src="/static/js/run-code/skulpt-compiler.js"></script>
</template>
<python-code>

</python-code>
<script>
    let tmpl = document.querySelector('#python-code-template');
    // If your code is inside an HTML Import you'll need to change the above line to:
    // let tmpl = document.currentScript.ownerDocument.querySelector('#x-foo-from-template');

    customElements.define('python-code', class extends HTMLElement {
        constructor() {
            super(); // always call super() first in the constructor.
            let shadowRoot = this.attachShadow({mode: 'open'});
            shadowRoot.appendChild(tmpl.content.cloneNode(true));
        }
    });

</script>
{% endblock %}
